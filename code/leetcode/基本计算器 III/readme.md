# <u>[772. 基本计算器 III](https://leetcode-cn.com/problems/basic-calculator-iii/)</u>

> 难度 困难

实现一个基本的计算器来计算简单的表达式字符串。

表达式字符串只包含非负整数， `+`, `-`, `*`, `/` 操作符，左括号 `(` ，右括号 `)`和空格 。整数除法需要向下截断。

你可以假定给定的字符串总是有效的。所有的中间结果的范围为 `[-2147483648, 2147483647]`。

**进阶：**你可以在不使用内置库函数的情况下解决此问题吗？

 

**示例 1：**

```
输入：s = "1 + 1"
输出：2
```

**示例 2：**

```
输入：s = " 6-4 / 2 "
输出：4
```

**示例 3：**

```
输入：s = "2*(5+5*2)/3+(6/2+8)"
输出：21
```

**示例 4：**

```
输入：s = "(2+6* 3+5- (3*14/7+2)*5)+3"
输出：-12
```

**示例 5：**

```
输入：s = "0"
输出：0
```

 

**提示：**

- `1 <= s <= 104`
- `s` 由整数、`'+'`、`'-'`、`'*'`、`'/'`、`'('`、`')'` 和 `' '` 组成
- `s` 是一个 **有效的** 表达式





## 题解：

1. 这道题使用到很经典的**递归思想**。对于遇到的每一个括号表达式，我们都将其交给下一层的递归程序来计算，这样能够避免自己进行栈的复杂操作。

2. 使用了Queue来保存当前的无括号式子。在最终计算式子的结果时，队列中的操作符只有`+`和`-`，因为在压队列的过程中，如果遇到`*`或`/`，我们都会先弹出队列最末的操作数，进行乘或除运算后，再把新结果压回去。通过这种办法可以实现`*`或`/`具有更高的优先级。
3. 函数`f`需要返回两个变量：当前子表达式的计算结果，以及String的遍历位置`i`，以便于上层继续操作。这里使用了`int[2]`的方式进行返回。